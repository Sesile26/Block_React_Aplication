(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{19:function(t,e,n){},27:function(t,e,n){},28:function(t,e,n){},30:function(t,e,n){},31:function(t,e,n){},32:function(t,e,n){},33:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(8),s=n.n(a),o=(n(19),n(4)),u=n(2),i=n.n(u),p=n(3),l="https://bloggy-api.herokuapp.com";function b(){return j.apply(this,arguments)}function j(){return(j=Object(p.a)(i.a.mark((function t(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(l,"/posts"));case 2:return e=t.sent,t.abrupt("return",e.json());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(t){return f.apply(this,arguments)}function f(){return(f=Object(p.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(l,"/posts/").concat(e,"?_embed=comments"));case 2:return n=t.sent,t.abrupt("return",n.json());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(t,e){return O.apply(this,arguments)}function O(){return(O=Object(p.a)(i.a.mark((function t(e,n){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(l,"/posts"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({id:Math.floor(1e3*Math.random()),title:e,body:n})});case 2:return r=t.sent,t.abrupt("return",r.json());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(t){return x.apply(this,arguments)}function x(){return(x=Object(p.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(l,"/posts/").concat(e),{method:"DELETE"});case 2:return n=t.sent,t.abrupt("return",n.json());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(t,e,n){return y.apply(this,arguments)}function y(){return(y=Object(p.a)(i.a.mark((function t(e,n,r){var c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(l,"/posts/").concat(r),{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify({id:r,title:e,body:n})});case 2:return c=t.sent,t.abrupt("return",c.json());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}n(27);var w=n(6),N="LOAD_POSTS",g="SELECT_POST",k="RELOAD",S=function(t){return{type:g,payload:t}},_=function(){return{type:k}},C=(n(28),n(1)),P=function(){var t=Object(o.b)(),e=Object(r.useState)(""),n=Object(w.a)(e,2),c=n[0],a=n[1],s=Object(r.useState)(""),u=Object(w.a)(s,2),l=u[0],b=u[1],j=function(){var e=Object(p.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!c||!l){e.next=6;break}return e.next=4,h(c,l);case 4:a(""),b(""),t(_());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsxs)("form",{className:"content postForm",onSubmit:j,children:[Object(C.jsx)("h2",{children:"Add new post"}),Object(C.jsx)("input",{type:"text",className:"input postForm__input",placeholder:"Title",value:c,onChange:function(t){return a(t.target.value)}}),Object(C.jsx)("textarea",{className:"textarea PostForm__textarea",placeholder:"Write here...",value:l,onChange:function(t){return b(t.target.value)}}),Object(C.jsx)("button",{type:"submit",className:"button is-primary PostForm__button",children:"Post"})]})},D=n(10),E=n(5);function F(t,e){return T.apply(this,arguments)}function T(){return(T=Object(p.a)(i.a.mark((function t(e,n){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(l,"/comments"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({postId:e,body:n})});case 2:return r=t.sent,t.abrupt("return",r.json());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var A=function(t){return t.posts},L=function(t){return t.selectedPost},J=function(t){return t.update},I=(n(30),function(t){var e=t.addComment,n=Object(r.useState)(""),c=Object(w.a)(n,2),a=c[0],s=c[1];return Object(C.jsxs)("form",{onSubmit:function(t){t.preventDefault(),a&&(e(a),s(""))},className:"commentForm",children:[Object(C.jsx)("input",{type:"text",placeholder:"Write something here",value:a,onChange:function(t){return s(t.target.value)},className:"input is-info"}),Object(C.jsx)("button",{type:"submit",className:"button is-success",children:"Add comment"})]})}),M=(n(31),function(t){var e=t.getPostsDetails,n=Object(o.b)(),c=Object(o.c)(L),a=Object(r.useState)(!1),s=Object(w.a)(a,2),u=s[0],l=s[1],b=Object(r.useState)(null===c||void 0===c?void 0:c.title),j=Object(w.a)(b,2),d=j[0],f=j[1],h=Object(r.useState)(null===c||void 0===c?void 0:c.body),O=Object(w.a)(h,2),x=O[0],y=O[1],N=Object(r.useState)(!1),g=Object(w.a)(N,2),k=g[0],P=g[1],T=function(){var t=Object(p.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null===c||void 0===c?void 0:c.id)){t.next=4;break}return t.next=3,m(c.id);case 3:n(S(null));case 4:n(_());case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),A=function(){var t=Object(p.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c){t.next=4;break}return t.next=3,F(c.id,e);case 3:n(S(Object(E.a)(Object(E.a)({},c),{},{comments:[].concat(Object(D.a)(c.comments),[{postId:c.id,body:e}])})));case 4:n(_());case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),J=function(){var t=Object(p.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(d&&x&&(null===c||void 0===c?void 0:c.id))){t.next=5;break}return t.next=3,v(d,x,null===c||void 0===c?void 0:c.id);case 3:l(!1),e(c.id);case 5:n(_());case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();if(!c)return Object(C.jsx)("div",{children:Object(C.jsx)("h2",{children:"Open some post for details"})});return Object(C.jsxs)("div",{className:"postDetails",children:[!u&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("h1",{className:"title",children:c.title}),Object(C.jsx)("p",{className:"postDetails__body",children:c.body})]}),u&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("input",{type:"text",className:"input PostForm__input",placeholder:"Title",value:d,onChange:function(t){return f(t.target.value)}}),Object(C.jsx)("textarea",{className:"textarea PostForm__textarea",placeholder:"Write here...",value:x,onChange:function(t){return y(t.target.value)}}),Object(C.jsx)("button",{type:"button",className:"button is-success is-light",onClick:function(){return J()},children:"Save"})]}),Object(C.jsx)("ul",{className:"postDetails__comments",children:c.comments.map((function(t){return Object(C.jsx)("li",{className:"box",children:t.body},t.body)}))}),k&&Object(C.jsx)(I,{addComment:A}),Object(C.jsxs)("div",{className:"buttons",children:[Object(C.jsx)("button",{type:"button",onClick:function(){return l(!u),f(c.title),void y(c.body)},className:"button is-warning",children:"Edit"}),Object(C.jsx)("button",{type:"button",onClick:function(){return P(!k)},className:"button is-primary",children:"Add Comment"}),Object(C.jsx)("button",{type:"button",onClick:function(){return T()},className:"button is-danger",children:"Delete"})]})]})}),W=(n(32),function(t){var e=t.getPostsDetails,n=Object(o.b)(),c=Object(o.c)(A),a=Object(o.c)(J),s=function(){var t=Object(p.a)(i.a.mark((function t(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b();case 2:e=t.sent,n({type:N,payload:e});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){s()}),[a]),Object(C.jsx)("ul",{className:"postList",children:c.map((function(t){return Object(C.jsx)("div",{children:Object(C.jsxs)("li",{className:"box postList__item",children:[Object(C.jsx)("h1",{children:t.title}),Object(C.jsx)("p",{children:t.body}),Object(C.jsx)("button",{type:"button",className:"button is-info",onClick:function(){return e(t.id)},children:"Open post"})]})},t.id)}))})}),B=function(){var t=Object(o.b)(),e=function(){var e=Object(p.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(n);case 2:r=e.sent,t(S(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsx)("div",{className:"App",children:Object(C.jsxs)("div",{className:"columns",children:[Object(C.jsx)("div",{className:"column",children:Object(C.jsx)(W,{getPostsDetails:e})}),Object(C.jsxs)("div",{className:"column",children:[Object(C.jsx)(M,{getPostsDetails:e}),Object(C.jsx)(P,{})]})]})})},R=n(14),U={posts:[],selectedPost:null,update:!1},q=Object(R.a)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case N:return Object(E.a)(Object(E.a)({},t),{},{posts:Object(D.a)(e.payload)});case g:return Object(E.a)(Object(E.a)({},t),{},{selectedPost:e.payload});case k:return Object(E.a)(Object(E.a)({},t),{},{update:!t.update});default:return t}}));s.a.render(Object(C.jsx)(c.a.StrictMode,{children:Object(C.jsx)(o.a,{store:q,children:Object(C.jsx)(B,{})})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.ee69eb8e.chunk.js.map